<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Face Sorter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gray-50 text-gray-900 dark:bg-neutral-900 dark:text-gray-200">
    <div class="mx-auto max-w-5xl px-4 py-10">
        <div class="mb-6">
            <a href="{{ url_for('index') }}"
                class="focus:outline-none focus:ring-2 focus:ring-blue-600 inline-flex items-center gap-2 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"
                    aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4A1 1 0 018.707 6.293L6.414 8.586H17a1 1 0 110 2H6.414l2.293 2.293a1 1 0 010 1.414z"
                        clip-rule="evenodd" />
                </svg>
                Back to Upload
            </a>
        </div>

        <h1 class="text-3xl font-bold tracking-tight">Sorted Images by Person</h1>

        <div class="mt-4">
            <a href="{{ url_for('download_sorted_zip') }}"
                class="inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700">
                Download All
            </a>
        </div>

        {% for person in persons %}
        <section class="mt-8">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-400">{{ person.name }}</h2>
            <div class="my-3 flex flex-wrap gap-2">
                {% for img in person.images %}
                <img src="{{ url_for('files', subpath=person.name + '/' + img) }}" alt="{{ img }}"
                    class="h-24 w-auto rounded-md border border-gray-300 bg-white object-contain" loading="lazy"
                    decoding="async">
                {% endfor %}
            </div>
            <a href="{{ url_for('download_person_zip', person_name=person.name) }}"
                class="inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50">
                Download {{ person.name }}
            </a>
        </section>
        {% endfor %}
    </div>

    <script src="{{ url_for('static', filename='js/results.js') }}"></script>
</body>

</html>