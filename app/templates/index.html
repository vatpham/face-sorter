<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Face Sorter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="min-h-screen bg-gray-50 text-gray-900 dark:bg-neutral-900 dark:text-gray-200">
    <div class="mx-auto max-w-3xl px-4 py-10">
        <h1 class="text-3xl font-bold tracking-tight">Upload Images to Sort by Person</h1>

        <form id="uploadForm" method="post" enctype="multipart/form-data" class="mt-6 space-y-4">
            <div>
                <label id="drop-zone" class="flex items-center justify-center text-center cursor-pointer hover:border-blue-600 hover:border-2 w-full h-52 mt-10 rounded-md border border-gray-300 bg-white dark:bg-neutral-800 shadow-sm
                        font-medium text-sm transition-all duration-150">
                    Drop images here, or click to upload.
                    <input id="fileinput" type="file" name="file" accept="image/*" required multiple class="hidden" />
                </label>
            </div>

            <div class="flex gap-2 mt-2">
                <button type="submit" id="submitBtn"
                    class="hidden inline-flex items-center rounded-md bg-blue-600 px-6 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 transition-colors duration-200">
                    Upload and Sort
                </button>

                <button type="button" id="clearBtn"
                    class="hidden inline-flex items-center rounded-md border-2 border-red-800 px-6 py-2 text-sm font-semibold text-red-600 shadow-sm hover:bg-red-800 hover:text-white transition-colors duration-200">
                    Clear
                </button>
            </div>

            <div id="preview" class="mt-4 flex flex-wrap gap-2"></div>

        </form>


        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="mt-4 rounded-lg bg-gray-100 p-4">
            {% for message in messages %}
            <div class="text-sm text-gray-800">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <div id="loadingOverlay" class="fixed p-5 inset-0 z-50 hidden bg-black/40 backdrop-blur-sm">
            <div class="flex h-full w-full items-center justify-center ">
                <div
                    class="w-full max-w-sm rounded-lg bg-gray-50 text-gray-900 dark:bg-neutral-900 dark:text-gray-200 p-5 shadow">
                    <h2 class="text-sm font-semibold">Processing images…</h2>
                    <p class="text-xs text-gray-500 dark:text-gray-200">This may take a moment</p>
                    <div class="mt-4 relative h-2 w-full overflow-hidden rounded bg-gray-200">
                        <div class="absolute top-0 h-2 rounded bg-blue-600"
                            style="animation: indeterminate 1.4s infinite;">
                        </div>
                    </div>
                    <p class="mt-3 text-xs text-gray-600 dark:text-gray-200">Uploading and sorting faces…</p>
                </div>
            </div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>